{
  "name": "13-pinecone-test",
  "nodes": [
    {
      "parameters": {
        "content": "## Pinecone Test\n\n클라우드 기반 Vector DB\nhttps://www.pinecone.io/",
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -464,
        -256
      ],
      "typeVersion": 1,
      "id": "bc5b1961-2ba4-46d6-b397-e357406a50cf",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "formTitle": "Upload",
        "formFields": {
          "values": [
            {
              "fieldLabel": "file",
              "fieldType": "file",
              "multipleFiles": false,
              "acceptFileTypes": ".pdf"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -400,
        16
      ],
      "id": "da58153e-ca68-46ad-86c9-e25b7ddff9a1",
      "name": "On form submission",
      "webhookId": "f0c6021c-c840-4665-bd2f-133cae0e4a23"
    },
    {
      "parameters": {
        "mode": "insert",
        "memoryKey": {
          "__rl": true,
          "value": "vectorstore_test",
          "mode": "list"
        },
        "clearStore": true
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        -96,
        -560
      ],
      "id": "a8ff0024-74e4-4231-8b9f-889450ef8da2",
      "name": "Simple Vector Store"
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        16,
        -400
      ],
      "id": "0e3463cc-de0f-4512-ae7a-d1666cd2c8cd",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -144,
        -400
      ],
      "id": "7867807f-8f63-4af5-9983-3fc44708dc79",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "crUDwcljSq5eBwPl",
          "name": "수업용 인증"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        -96,
        192
      ],
      "id": "f3bc6d53-cbd4-4586-90b2-e6ddbd650b7e",
      "name": "Default Data Loader1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -272,
        192
      ],
      "id": "080e17b8-b569-49d8-b671-2c0d105d6dd0",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "crUDwcljSq5eBwPl",
          "name": "수업용 인증"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "pinecone-test",
          "mode": "list",
          "cachedResultName": "pinecone-test"
        },
        "options": {
          "pineconeNamespace": "it"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        -208,
        16
      ],
      "id": "3d79785b-6570-4549-a1eb-ea7549ece06e",
      "name": "Insert Pinecone",
      "credentials": {
        "pineconeApi": {
          "id": "X8WLPDin8Pa7Ny0f",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## 벡터 데이터 저장\n",
        "height": 432,
        "width": 624
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -464,
        -80
      ],
      "typeVersion": 1,
      "id": "7726f8f1-b0f9-4394-a5c0-6dff5ba211e4",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## RAG\n",
        "height": 480,
        "width": 864
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        272,
        -80
      ],
      "typeVersion": 1,
      "id": "60141a2b-173a-4daa-b915-120c48dd4a8b",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are a senior analyst specializing in 2026 economy and IT trends.\n\nToday: {{ $now }}\n\nYour mission:\nProvide accurate, evidence-based insights using internal RAG and web search tools.\n\nDecision Logic:\n\n1. Identify:\n   - Target year\n   - Domain: economy / IT / mixed\n\n2. Tool Routing:\n   - If year == 2026:\n        - Economy → Search Economy Pinecone\n        - IT → Search IT Pinecone\n        - Mixed → Use both\n   - Else:\n        - Use Tavily web search\n\n3. Fallback:\n   - If RAG results are missing or insufficient:\n        → Use Tavily as supplementary source\n\n4. Rules:\n   - Never fabricate facts.\n   - Prefer RAG for forecasts and trend analysis.\n   - Clearly indicate information source.\n\nAnswer Style:\n- Analytical\n- Structured\n- Source-grounded\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        496,
        -16
      ],
      "id": "4973127c-1bc8-4c3b-9f08-0f567829f48b",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        304,
        -16
      ],
      "id": "5798dc93-b052-486c-a90a-bbb28369ff0c",
      "name": "chat",
      "webhookId": "dc9fc0f7-818b-44a5-b3ae-1355cfb411bf"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        368,
        160
      ],
      "id": "714b89d2-2a21-45a2-ac3f-a83efcd11da6",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "crUDwcljSq5eBwPl",
          "name": "수업용 인증"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        496,
        256
      ],
      "id": "8ec2eff7-f725-4302-b388-744463782968",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        928,
        320
      ],
      "id": "d29d0910-6ea6-4663-b564-8f23fab12572",
      "name": "Embeddings OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "crUDwcljSq5eBwPl",
          "name": "수업용 인증"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "2026 경제 관련 보고서 pdf 벡터스토어",
        "pineconeIndex": {
          "__rl": true,
          "value": "pinecone-test",
          "mode": "list",
          "cachedResultName": "pinecone-test"
        },
        "includeDocumentMetadata": false,
        "options": {
          "pineconeNamespace": "economy"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        816,
        176
      ],
      "id": "40b9fdb7-2cc4-4fc0-afc1-2764d36858b4",
      "name": "Search Economy Pinecone",
      "credentials": {
        "pineconeApi": {
          "id": "X8WLPDin8Pa7Ny0f",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "2026 IT 관련 보고서 pdf 벡터스토어",
        "pineconeIndex": {
          "__rl": true,
          "value": "pinecone-test",
          "mode": "list",
          "cachedResultName": "pinecone-test"
        },
        "includeDocumentMetadata": false,
        "options": {
          "pineconeNamespace": "it"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        848,
        64
      ],
      "id": "452c0e64-e208-4f43-83ce-1320f479efc1",
      "name": "Search IT Pinecone",
      "credentials": {
        "pineconeApi": {
          "id": "X8WLPDin8Pa7Ny0f",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Web 검색 Tool",
        "method": "POST",
        "url": "https://api.tavily.com/search",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "httpBearerAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `적절한 검색어`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        672,
        208
      ],
      "id": "447b8a68-5725-4e79-b61f-a3dcade68f47",
      "name": "Tavily",
      "credentials": {
        "httpBearerAuth": {
          "id": "4zBPPy6w17igbcor",
          "name": "Tavily Auth"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Insert Pinecone",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "Insert Pinecone",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Insert Pinecone",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Insert Pinecone": {
      "main": [
        []
      ]
    },
    "chat": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Search Economy Pinecone",
            "type": "ai_embedding",
            "index": 0
          },
          {
            "node": "Search IT Pinecone",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Search Economy Pinecone": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Search IT Pinecone": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Tavily": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "18b0c164-52de-40f3-9df1-81a0eacf3d58",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "06f57ead87e05f5144d588b72ffcb2b55a96d8ab9c25ae283efe70c0d676b771"
  },
  "id": "640VBRkwYFESUqYI",
  "tags": []
}